# XFSでのベンチマークで不思議なことが起こったので調べた話

## どういうベンチマークをしていた?
疑似コードで書くとこういうやつ
```
let file  = 起動オプション["ベンチマークで書き込み対象になるファイル"];
let start = 起動オプション["書き込み開始位置"];
let size  = 起動オプション["1回の書き込みバイト数"];
let count = 起動オプション["何回書き込むか"];

// ファイルをO_DIRECTモードで開く
// もし存在しなければ、新規に作成する
let fd = open(file).with_odirect(true);

fd.seek(start);

let buffer = allocate(size);

for(int i = 0; i < count; ++i) {
 write(fd, buffer);
} 
```
+ ファイルを新規に作成し、O_DIRECTモードで開き、
+ 起動オプションで指定された位置にずらし
+ 指定されたバイト数で、指定された回数だけシーケンシャルにデータを書き出す

## 何が起こった?
+ ファイルを新規に生成するパターンで、書き込み開始位置を先頭位置でないところからやると遅くなる

## 遅くなることを実際に確認してみる
hoge
